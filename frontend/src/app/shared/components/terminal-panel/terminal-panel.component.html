<div class="terminal-panel" *ngIf="activeNodes().length > 0">
  <!-- Tabs Header -->
  <div class="terminal-panel__header">
    <div class="tabs-container">
      <div 
        *ngFor="let node of activeNodes()" 
        class="tab" 
        [class.tab--active]="node === activeTab()"
        (click)="selectTab.emit(node)">
        <span class="icon">ðŸ’»</span>
        <span class="label">{{ node }}</span>
        <button class="close-btn" (click)="$event.stopPropagation(); closeTerminal.emit(node)">Ã—</button>
      </div>
    </div>
    
    <!-- Controls -->
    <div class="controls">
      <button class="clear-btn" (click)="clearActiveTerminal()" title="Clear Scrollback">
        <span class="icon">ðŸ§¹</span> Clear Console
      </button>
    </div>
  </div>

  <!-- Terminal Content (Mantener todos en DOM pero ocultar los inactivos para no perder sesiÃ³n) -->
  <div class="terminal-panel__body">
    <div 
      *ngFor="let node of activeNodes()" 
      #termContainer
      [attr.data-node]="node"
      class="xterm-wrapper"
      [style.display]="node === activeTab() ? 'block' : 'none'">
    </div>
  </div>
</div>
